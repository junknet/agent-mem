# Agent Memory System Configuration
# 记忆系统配置

# 项目识别规则
project:
  # 个人唯一标识（多机器共享记忆用）
  owner_id: personal
  # 识别项目根的标记文件（按优先级）
  root_markers:
    - .git
    - .project.yaml
    - package.json
    - pyproject.toml
    - Cargo.toml
    - go.mod
  # .project.yaml 中的字段名
  project_id_key: project_id
  project_name_key: project_name
  # 无法识别项目时的默认项目
  default_project_id: global

# 版本管理
versioning:
  # 保留策略：all（全部保留）| count（保留最近N个）| days（保留最近N天）
  strategy: all
  keep_count: 10
  keep_days: 180
  archive_old: true
  # 语义相似阈值（用于替换仲裁）
  semantic_similarity_threshold: 0.85

# LLM 配置（千问全家桶）
llm:
  base_url: https://dashscope.aliyuncs.com/compatible-mode/v1
  api_key_env: DASHSCOPE_API_KEY
  model_distill: qwen-plus
  model_classify: qwen-turbo
  model_route: qwen-turbo
  model_relation: qwen-turbo
  model_arbitrate: qwen-flash
  model_summary: qwen-turbo

# Embedding 配置
embedding:
  # provider: qwen (千问向量) | fastembed (本地向量)
  provider: qwen
  model: text-embedding-v4
  dimension: 1536
  batch_size: 10

# 重排序配置（可选）
rerank:
  enabled: true
  model: gte-rerank-v2
  top_n: 10

# 查询扩展（语义检索增强）
query_expansion:
  enabled: true
  model: qwen-turbo
  max_keywords: 6

# 片段切分配置
chunking:
  strategy: fixed_tokens
  chunk_size: 500
  overlap: 50
  approx_chars_per_token: 4

# 存储配置
storage:
  # PostgreSQL + pgvector
  database_url: postgresql://cortex:cortex_password_secure@localhost:5440/cortex_knowledge

# 日志配置
logging:
  level: INFO
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  file: ./data/agent-mem.log
